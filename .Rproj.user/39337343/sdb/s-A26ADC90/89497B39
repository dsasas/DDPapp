{
    "contents" : "# Set the working directory\nsetwd(\"C:/Courseradata/DDP\")\n\n# Reading the Morticd10.csv file to morticd10  data.frame\nmorticd10 <- read.csv(\"Morticd10.csv\", na.strings=c(\"NA\",\"\",\"NULL\",\"#DIV/0!\"), strip.white=TRUE)\n\n# Reading the country_codes.csv file to country  data.frame\ncountry <- read.csv(\"country_codes.csv\")\n\n# Reading the pop.csv file to pop  data.frame\npop <- read.csv(\"pop.csv\", na.strings=c(\"NA\",\"\",\"NULL\",\"#DIV/0!\"), strip.white=TRUE)\n\n# Reading the icd10cm_order_2015.txt file to icd10  data.frame\nicd10 <- read.fwf(\"icd10cm_order_2015.txt\", widths=c(-6, 8, 1,-1,60))\n\n\n# Loading data.table library\nlibrary(data.table)\n\n# Creating a new data.frame from morticd10 with aggregate information by Country, Year and Cause\nnewMorticd10 <- aggregate(morticd10[\"Deaths1\"], by=morticd10[c(\"Country\",\"Year\",\"Cause\")], FUN=sum)\n\n# Changing names to be able to merge operation\nsetnames(country, old='country', new = 'Country')\nsetnames(country, old='name', new = 'Name')\n\n# Merging country and newMorticd10 to insert country names\nnewMorticd10_a <- merge(country,newMorticd10,by=\"Country\") \n\n# Removing all whitespace from \"Cause\" column\ntrim <- function (x) gsub(\"^\\\\s+|\\\\s+$\", \"\", x) \nnewMorticd10_a$Cause <- trim(newMorticd10_a$Cause)\n\n# Creting a new column (Char) with \"Cause\" column length \nnewMorticd10_a$Char <- nchar(newMorticd10_a$Cause)\n\n# Subseting newMorticd10_a: removing columns with Char < 4\nnewMorticd10_b <- subset(newMorticd10_a, Char < 4 )\n\n# Removing all whitespace from \"Cause\" column (icd10)\nicd10$V1 <- trim(icd10$V1)\n\n# Creting a new column (Char) with \"Cause\" column length (icd10)\nicd10$V4 <- nchar(icd10$V1)\n\n# Subseting icd10: removing columns with Char < 4\nnewIcd10 <- subset(icd10, V4 < 4)\n\n# Changing names to be able to merge operation\nsetnames(newIcd10, old='V1', new = 'Cause')\nsetnames(newIcd10, old='V3', new = 'Cause_name')\n\n# Merging newIcd10 and newMorticd10_b to insert cause names\nnewMorticd10_c <- merge(newIcd10,newMorticd10_b,by=\"Cause\")\n\n\n# Creating a new data.frame from pop with aggregate information by Country and Year\nnewPop <- aggregate(pop[\"Pop1\"], by=pop[c(\"Country\",\"Year\")], FUN=sum)\n\n# Subseting pop: removing not used columns\nvar <- c('Country','Year', 'Pop1')\nnewPop <- newPop[var]\n\n# Merging newPop and newMorticd10_b to insert population amount\nnewMorticd10_d <- merge(newPop,newMorticd10_c,by=c(\"Country\", \"Year\"))\n\n# Changing \"Name\" to \"Country_name\" \nsetnames(newMorticd10_d, old='Name', new = 'Country_name')\n\n# Erasing data not used\nmorticd10 <- 0\nnewMorticd10 <- 0\n\n# Loading ggplot2 library\nlibrary(ggplot2)\n\n# \ntrim.trailing <- function (x) sub(\"\\\\s+$\", \"\", x)\nnewMorticd10_c$Cause_name <- trim.trailing(newMorticd10_c$Cause_name)\n\nsetnames(newMorticd10_c, old='Deaths1', new = 'Deaths')\nsetnames(newMorticd10_c, old='Country', new = 'Country_code')\nsetnames(newMorticd10_c, old='Name', new = 'Country')\nsetnames(newMorticd10_c, old='Cause', new = 'Cause_code')\nsetnames(newMorticd10_c, old='Cause_name', new = 'Cause')\nteste =  subset(newMorticd10_c, Country_code == \"2070\"  & Cause_code == \"I81\")\nggplot(teste,aes( Year, Deaths)) + geom_line()\n\nqplot(Year, Deaths, data = teste, color=Country,  geom = \"line\", main = paste0(\"Cause of Deaths: \", teste$Cause[1])[1])\n\n\n# Saving newMorticd10_d.csv\nwrite.csv(newMorticd10_d, file = \"newMorticd10_d.csv\"\nhead(newMorticd10_a)\nwrite.csv(newMorticd10_c, file = \"newMorticd10_c.csv\")\n\na <- subset(Morticd10, Cause==\"I50\" )\n\nmorticd10 <- read.csv(\"newMorticd10_c.csv\")\ntemp <<- data.frame(unique(morticd10$Country))\nnames(temp) <- \"Country\"\ntemp1 <- order(temp$Country)\nc <- data.frame(temp$Country[temp1])\nnames(c) <- \"Country\"\nwrite.csv(c, file = \"country.csv\")\n\ntemp <<- data.frame(unique(newMorticd10_c$Cause))\nnames(temp) <- \"Cause\"\ntemp1 <- order(temp$Cause)\nc <- data.frame(temp$Cause[temp1])\nnames(c) <- \"Cause\"\nwrite.csv(c, file = \"cause.csv\")\n\n\n\ntemp <- aggregate(Cause ~ Country, data = newMorticd10_c, count)\nwrite.csv(temp, file = \"temp.csv\")\ntemp1 <- setDT(newMorticd10_c)[, NEW := .N, by = Cause]\ntemp2 <- subset(temp1, NEW > 499 ) # novo data set\ntemp3 <<- data.frame(unique(temp2$Cause))\nnames(temp3) <- \"Cause\"\ntemp4 <- order(temp3$Cause)\nc <- data.frame(temp3$Cause[temp4])\nnames(c) <- \"Cause\"\nwrite.csv(c, file = \"cause.csv\")\nwrite.csv(temp2, file = \"newMorticd10_s.csv\")\n\ntemp6 <<- data.frame(unique(temp2$Country))\nnames(temp6) <- \"Country\"\ntemp7 <- order(temp6$Country)\nc <- data.frame(temp6$Country[temp7])\nnames(c) <- \"Country\"\nwrite.csv(c, file = \"country.csv\")\n\n\n\n\n\n",
    "created" : 1426936293646.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3726480622",
    "id" : "89497B39",
    "lastKnownWriteTime" : 1426937827,
    "path" : "C:/Courseradata/DDP/script.R",
    "project_path" : null,
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}